"use strict";angular.module("oisdn4App",["ngResource","ngTouch","ui.bootstrap","ui.router","highcharts-ng","geolocation","ngDialog","uiGmapgoogle-maps"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("home",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl"}).state("account",{url:"/:id/account",templateUrl:"views/account.html",controller:"AccountCtrl"})}]).config(["uiGmapGoogleMapApiProvider",function(a){a.configure({v:"3.17"})}]).run(["$rootScope","users","geolocation","ehrApi","$state",function(a,b,c,d,e){a.uporabniki=b,a.$state=e,a.$on("ngDialog.opened",function(){c.getLocation().then(function(b){a.lokacija={latitude:b.coords.latitude,longitude:b.coords.longitude}})})}]),angular.module("oisdn4App").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("oisdn4App").controller("AccountCtrl",["$scope","grafi","users","$stateParams",function(a,b,c,d){a.uporabnik=c[d.id],a.grafi=b}]),angular.module("oisdn4App").service("ehrApi",["$http","$q","users",function(a,b,c){function d(a,b,c,d,e,f){return{"ctx/language":"en","ctx/territory":"SI","ctx/time":a,"vital_signs/height_length/any_event/body_height_length":b,"vital_signs/body_weight/any_event/body_weight":c,"vital_signs/body_temperature/any_event/temperature|magnitude":d,"vital_signs/body_temperature/any_event/temperature|unit":"Â°C","vital_signs/blood_pressure/any_event/systolic":e,"vital_signs/blood_pressure/any_event/diastolic":f}}var e="https://rest.ehrscape.com/rest/v1",f=b.defer();a({url:e+"/session",method:"POST",params:{username:"ois.seminar",password:"ois4fri"}}).success(function(a){f.resolve(a.sessionId)}),this.generateTestData=function(){f.promise.then(function(b){a.defaults.headers.common["Ehr-Session"]=b;var f=c[0];a({url:e+"/composition",method:"POST",params:{ehrId:f.ehrId,templateId:"Vital Signs",format:"FLAT",committer:"Milka Gorenjka"},data:d("2014-3-19T13:10Z",f.meritve.height[0],f.meritve.weight[0],f.meritve.temperature[0],f.meritve.systolicBP[0],f.meritve.diastolicBP[0])}).success(function(){a({url:e+"/view/"+f.ehrId+"/blood_pressure",method:"GET"})})})},this.generateUsers=function(){angular.forEach(c,function(b){a({url:e+"/ehr",method:"POST"}).success(function(c){console.log(c.ehrId),b.ehrId=c.ehrId,a({url:e+"/demographics/party",method:"POST",data:{firstNames:b.ime,lastNames:b.priimek,dateOfBirth:b.datumRojstva,partyAdditionalInfo:[{key:"ehrId",value:b.ehrId}]}})})})}}]),angular.module("oisdn4App").constant("users",[{ime:"Ferdo",priimek:"Sidonija",slika:"images/franklin.9ab12c7a.png",datumRojstva:"1955-10-28T00:00",ehrId:"05cbb914-ee0e-478d-ab27-710468db0237",meritve:{temperature:[36.8,37,36.5,38.2,37.3],systolicBP:[106,117,115,102,119],diastolicBP:[65,61,68,71,69],height:[185,186,186,185,186],weight:[77.5,78.3,79,80,83.2]}},{ime:"Mojmir",priimek:"Vekoslav",slika:"images/obama.4072de07.png",datumRojstva:"1986-11-21T00:00",ehrId:"dac9e219-e10a-42a4-9479-b2ec1f4da00d",meritve:{temperature:[37.2,37.5,37,36.8,36.9],systolicBP:[129,135,139,130,132],diastolicBP:[75,90,78,89,85],height:[177,176,178,177,175],weight:[64,65.7,65.1,66.2,65.9]}},{ime:"Bogomil",priimek:"Borka",slika:"images/lincoln.e8c9bbfc.png",datumRojstva:"1994-12-10T00:00",ehrId:"57aeca58-1e72-4237-9619-f36686176a0d",meritve:{temperature:[36.7,36.9,37.1,36.8,37.4],systolicBP:[141,135,147,150,142],diastolicBP:[79,89,91,92,87],height:[182,181,183,185,184],weight:[71.3,72.4,71.9,73,73.2]}}]),angular.module("oisdn4App").constant("grafi",{pritisk:{options:{chart:{type:"bar"},tooltip:{style:{padding:10,fontWeight:"bold"}}},series:[{data:[10,15,12,8,7]}],title:{text:"Hello"}}});